<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-ripple/paper-ripple.html">
<link rel="import" href="../bower_components/iron-icons/social-icons.html">
<link rel="import" href="../bower_components/iron-icons/editor-icons.html">
<link rel="import" href="../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="stylesheet" href="../styles/elements/sidebar.css">

<dom-module id="portfolio-sidebar">
    <link rel="stylesheet" href="../styles/lib/animate.css">
    <style>
        :host {
            font-family: 'Roboto Condensed', sans-serif;
            line-height: 1.5;
            box-shadow: 6px 0 8px rgba(0, 0, 0, .1);
            background-color: rgb(255, 255, 255);
            z-index: 3;
            max-width: 300px;
            min-width: 250px;
            min-height: 100%;
            width: 20%;
            height: 100%;
            float: left;
        }
        
        @media screen and (max-width: 768px) {
            :host {
                min-width: 80px;
                width: 10%;
            }
        }
    </style>
    <template>
        <div id="sidebarmain" class="animated slideInLeft">
            <div id="myname">
                <!--{{firstName}}--><span> </span>
                <strong><!--{{lastName}}--><paper-ripple></paper-ripple></strong>
            </div>
            <template is="dom-repeat" as="profession" items="{{professions}}">
                <div class="profession">
                    <!--{{profession}}-->
                </div>
            </template>
            <paper-ripple id="pinkripple"></paper-ripple>
        </div>
        <div id="sidebarmenu" class="animated slideInLeft">
            <template is="dom-repeat" id="contentList" as="content" items="{{content}}">
                <a id="{{content.text}}" on-click="toggleState" href="{{content.ref}}" on-mouseover="hoverHandler" on-mouseout="hoverHandler">
                    <iron-icon icon$="{{getIconType(content.icon)}}" class$="{{setIconColor(content.color)}}"></iron-icon>
                    <span class$="{{computePortfolioText()}}">{{content.text}}</span>
                    <paper-ripple id="pinkripple"></paper-ripple>
                </a>
            </template>
        </div>
    </template>
    <script>
        Polymer({
            is: "portfolio-sidebar",
            properties: {
                firstName: {
                    type: "String",
                    value: "Andrés"
                },
                lastName: {
                    type: "String",
                    value: "García"
                },
                professions: {
                    type: "Array",
                    value: [
                        "Web Developer",
                        "Indsutrial Engineer"
                    ]
                },
                content: {
                    type: "Array",
                    value: [
                        {
                            text: "Profile",
                            icon: "social:person",
                            ref: "#",
                            color: "custom-red",
                            },
                        {
                            text: "Experience",
                            icon: "av:av-timer" || "icons:work",
                            ref: "#",
                            color: "custom-purple"
                            },
                        {
                            text: "Projects",
                            icon: "av:web",
                            ref: "#",
                            color: "custom-green"
                            },
                        {
                            text: "Skills",
                            icon: "av:equalizer" || "editor:insert-chart",
                            ref: "#",
                            color: "custom-blue"
                            },
                        {
                            text: "Education",
                            icon: "social:school",
                            ref: "#",
                            color: "custom-yellow"
                            }
                        ]

                }
            },

            /**Life Cycle CallBacks**/
            ready: function () {
                var windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
                var timer = windowWidth < 768 ? 6000 : 7700;
                this.async(function () {
                    this.$.sidebarmenu.querySelector("#Profile").classList.add("active");
                    this.$.sidebarmenu.querySelector("#Profile iron-icon").classList.add("active");
                    Array.prototype.forEach.call(
                        this.$.sidebarmenu.querySelectorAll(".portfoliotext"),
                        function (element) {
                            element.classList.remove("animated");
                            element.classList.remove("fadeInLeft");
                        });
                }, timer);
            },

            /**Custom Prototype Methods**/
            setIconColor: function (color) {
                return "animated rotateIn " + color;
            },
            getIconType: function (icon) {
                return icon;
            },
            quitActive: function () {
                Array.prototype.forEach.call(this.$.sidebarmenu.querySelectorAll("a"), function (element) {
                    element.classList.remove("active");
                    element.querySelector("iron-icon.iron-icon-0").classList.remove("active");
                });
                return this;
            },
            computePortfolioText: function () {
                return "animated fadeInLeft portfoliotext";
            },

            /**Events Handlers**/
            toggleState: function (e) {
                this.quitActive();
                var menuItem = e.srcElement.parentElement;
                var icon = menuItem.querySelector("iron-icon.iron-icon-0");
                menuItem.classList.add("active");
                icon.classList.add("active");
            },
            hoverHandler: function (e) {
                var hoveredLink = e.srcElement.parentElement;
                var textSpan = hoveredLink.querySelector(".portfoliotext");
                var icon = hoveredLink.querySelector("iron-icon");
                if (e.type == "mouseover") {
                    textSpan.classList.add("hovered");
                    icon.classList.add("hovered");
                } else if (e.type == "mouseout") {
                    textSpan.classList.remove("hovered");
                    icon.classList.remove("hovered");
                }
            }
        });
    </script>
</dom-module>